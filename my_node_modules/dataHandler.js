const fs = require('fs');
const path = require('path');

// Utility function: reading JSON and returning the corresponding object
function readData() {
    const jsonData = fs.readFileSync(path.join(__dirname, 'serverdb.json'), 'utf-8');
    return JSON.parse(jsonData);
}

const getAllFoods = () => readData();

function addNewFood(foodData) {
    const data = readData();
    // You might want to add some validation here to ensure foodData is valid
    data.push(foodData);
    fs.writeFileSync(path.join(__dirname, 'serverdb.json'), JSON.stringify(data, null, 2), 'utf8');
}

function getFoodNames() {
    const data = readData();
    return data.map(item => item['Food (100g)']);
}

module.exports = { getAllFoods, getFoodNames, addNewFood };
